<!doctype html>
<html lang="pl,en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet"> 
    <link href="https://fonts.googleapis.com/css?family=Noto+Serif&display=swap" rel="stylesheet"> 

    <link rel="title icon" href="/img/favicon.ico" />
    <link rel="stylesheet" href="/css/main_style.css">
    <link rel="stylesheet" href="/user/css/user_style.css">

    <title>Ciekawi Historii?</title>
  </head>
  <body>
    <!-- menu -->
    <nav class="navbar navbar-expand-md navbar-light sticky-top myNav">
      <a href="/index.html" class="navbar-brand"><i class="fas fa-atlas fa-2x text-white"></i></a>
      <button type="button" class="navbar-toggler py-2" data-toggle="collapse" data-target="#nav" id="navToggleButton" ><i class="fas fa-bars text-light fa-lg"></i><i class="fas fa-times text-success fa-lg collapse"></i></button>  
      <div class="collapse navbar-collapse justify-content-between" id="nav">
        <ul class="navbar-nav">
          <!-- drop down menu -->
          <li class="nav-item myNavItem dropdown"><a class="nav-link dropdown-toggle text-light px-3" role="button" data-toggle="dropdown" href="#" id="navDropdown">Epoki</a>
            <div class="dropdown-menu myNavDropdown" aria-labelledby="navDropdown">
              <a class="dropdown-item text-light myDopdownItem" href="/era/antiquity/">Starożytność</a>
              <a class="dropdown-item text-light myDopdownItem" href="/era/medieval/">Średniowiecze</a>
              <a class="dropdown-item text-light myDopdownItem" href="/era/modern/">Nowożytność</a>
              <a class="dropdown-item text-light myDopdownItem" href="/era/present-day/">Czasy współczesne</a>
          </div>
          </li>
          <!-- end drop down menu -->
          <li class="nav-item myNavItem"><a class="nav-link text-light px-3" href="/edit-article">Dodaj Artykuł</a></li>
          <li class="nav-item myNavItem"><a class="nav-link text-light px-3" href="/index.html">O Nas</a></li>
          <li class="nav-item myNavItem"><a class="nav-link text-light px-3" href="/contact">Kontakt</a></li>
        </ul>
        <span class="d-md-flex">
          <form class="form-inline">
            <div class="input-group">
                <input class="form-control inputSearch" type="text" placeholder="szukaj...">
                <div class="input-group-append">
                    <button type="button" class="btn text-muted myBtnSearch" ><i class="fas fa-search myIconSearch"></i></button>
                </div>
            </div>
          </form>
          <a href="login" class="nav-link ml-2 myMnuUserItem" id="btnLogIn" hidden data-toggle="tooltip" data-html="true" title="<h6>Zaloguj się lub utwórz konto</h6>" ><i class="fas fa-sign-in-alt text-success fa-lg"></i></a>
          <div class="btn-group myMnuUserItem ml-2" id="btnMnuUser" hidden>
            <a class="btn dropdown-toggle text-light" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-user text-info fa-lg mr-1"></i></a>
            <div class="dropdown-menu dropdown-menu-md-right myNavDropdown">
              <a class="dropdown-item text-light myMnuUserItem" href="#">Twoje konto</a>
              <a class="dropdown-item text-light myMnuUserItem" href="/user/#navArticles">Twoje artykuły</a>
              <a class="dropdown-item text-light myMnuUserItem" href="#" id="mnuLogOut"><i class="fas fa-sign-out-alt text-danger fa-lg mr-2"></i>Wyloguj</a>
            </div>
          </div>
        </span>
      </div>
    </nav>
    <!-- end menu -->

    <!-- Zawartość strony -->
    <section class="mainSection">
      <div class="container-fluid myContainer">
        <!-- menu zakładek -->
        <ul class="nav nav-pills justify-content-center m-3" role="tablist" aria-orientation="vertical">
          <li class="nav-item myNavPill">
            <a class="nav-link text-body active" id="navProfile" data-toggle="pill" href="#tabProfile" role="tab" aria-controls="tabProfile" aria-selected="true"><i class="fas fa-user text-info fa-lg "></i><span class="myProfileLabel ml-2">Twój profil</span></a>
          </li>
          <li class="nav-item myNavPill">
            <a class="nav-link text-body" id="navAddArticles" data-toggle="pill" href="#tabAddArticles" role="tab" aria-controls="tabAddArticles" aria-selected="false"><i class="fas fa-plus text-muted"></i><i class="far fa-newspaper text-muted fa-lg"></i><span class="myProfileLabel ml-2">Dodaj artykuł</span></a>
          </li>
          <li class="nav-item myNavPill">
            <a class="nav-link text-body" id="navArticles" data-toggle="pill" href="#tabArticles" role="tab" aria-controls="tabArticles" aria-selected="false"><i class="far fa-newspaper text-muted fa-lg"></i><span class="myProfileLabel ml-2">Twoje artykuły</span></a>
          </li>
          <li class="nav-item myNavPill">
            <a class="nav-link text-body" id="navLogout" data-toggle="pill" href="#tabProfile" role="tab" aria-controls="tabLogout" aria-selected="false"><i class="fas fa-sign-out-alt text-danger fa-lg"></i><span class="myProfileLabel ml-2">Wyloguj</span></a>
          </li>
        </ul>
        <!-- zawartości zakładek -->
        <div class="tab-content pt-3">
          <div class="tab-pane fade show active" id="tabProfile" role="tabpanel" aria-labelledby="tabProfile-tab">
            <div class="row justify-content-center">
              <div class="col-xl-8 col-lg-10 col-md-11">
                <p class="mb-1 h5">Witaj <span id="userNameSpan">"imie_usera"</span>.</p>
                <p class="text-justify border-bottom border-dark pb-2 h6">Poniżej znajdują się informacje na temat Twojego konta w naszym serwisie.</p>
                <form class="py-2" novalidate>
                  <div class="form-group row">
                    <label for="profileUserName" class="col-2 col-form-label text-right px-sm-3 px-0">Imię:</label>
                    <div class="col-sm-8 col-9 pl-sm-0 input-group">
                      <input type="text" id="profileUserName" class="form-control" readonly>
                      <button type="button" id="btnChangeName" class="input-group-append btn myButton ml-1" data-toggle="tooltip" data-html="true" title="<h6>Zmień imię</h6>" data-target="#modalChangeName"><i class="fas fa-feather-alt fa-lg "></i></button>
                    </div> 
                  </div>
                  <div class="form-group row">
                    <label for="profileUserEmail" class="col-2 col-form-label text-right px-sm-3 px-0">E-mail:</label>
                    <div class="col-sm-8 col-9 pl-sm-0 input-group">
                      <input type="email" id="profileUserEmail" class="form-control" readonly>
                      <button type="button" id="btnChangeMail" class="input-group-append btn myButton ml-1" data-toggle="tooltip" data-html="true" title="<h6>Zmień e-mail</h6>" ><i class="fas fa-feather-alt fa-lg "></i></button>
                    </div>                
                  </div>
                  <div class="form-group row">
                    <label for="profileUserPass" class="col-2 col-form-label text-right px-sm-3 px-0">Hasło:</label>
                    <div class="col-sm-8 col-9 col-8 pl-sm-0 input-group">
                      <input type="password" class="form-control" id="profileUserPass" readonly>
                      <button type="button" id="btnChangePass" class="input-group-append btn myButton ml-1" data-toggle="tooltip" data-html="true" title="<h6>Zmień hasło</h6>" ><i class="fas fa-feather-alt fa-lg "></i></button>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="row justify-content-center">
                      <button type="button" id="btnDelUser" class="btn btn-outline-dark myButton px-5" data-toggle="modal" data-target="#modalDelUser">Usuń konto</button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="tabArticles" role="tabpanel" aria-labelledby="tabArticles-tab">
            <p class="mb-3 h5 border-bottom border-dark pb-2">Twoje artykuły</p>
            <!-- karty z artykułami -->
            <div class="row mb-1">
              <label for="artEra" class="col-2 py-2 px-1 text-right">Epoka:</label>
              <div class="col-lg-3 col-md-6 col-8">
                <select class="custom-select rounded" id="artEra" required>
                  <option value="0" selected>&lt;Wszystkie&gt;</option>
                  <option>Starożytność</option>
                  <option>Średniowiecze</option>
                  <option>Nowożytność</option>
                  <option>Czasy współczesne</option>
                </select>
              </div>
            </div>
            <p id="artCount">Liczba znalezionych artykułów: </p>
            <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3" id="cardArticles">
            </div>
          </div>
          <!-- <div class="tab-pane fade h5 text-center" id="tabLogout" role="tabpanel" aria-labelledby="tabLogout-tab">Wylogowanie..</div> -->
        </div>
      </div>
  </section>
  <!-- okna modalne do obsługi konta -->
  <div class="modal fade" id="modalChangeName">
    <div class="modal-dialog">
        <div class="modal-content myModal">
            <div class="modal-header">
                <h6 class="modal-title">Zmieniasz swoje imię</h6>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <label for="changeNewName">Nowe imię:</label>
              <input type="text" class="form-control" id="changeNewName">
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-outline-danger myModal" data-dismiss="modal" onclick="changeUserName(document.getElementById('changeNewName').value)">Zatwierdź</button>
                <button type="button" class="btn btn-outline-secondary myModal" data-dismiss="modal">Anuluj</button>
            </div>
        </div>
    </div>
  </div>

  <div class="modal fade" id="modalChangeMail">
    <div class="modal-dialog">
        <div class="modal-content myModal">
            <div class="modal-header">
                <h6 class="modal-title">Zmieniasz swój e-mail</h6>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body"> 
              <form class="needs-validation" novalidate>
                <label for="changeNewMail" class="font-weight-bolder">Nowy adres e-mail:</label>
                <input type="email" class="form-control border border-warning" id="changeMailNewMail">
                <div class="invalid-feedback">Proszę podać poprawny adres e-mail.</div>
                <p class="font-weight-bolder mt-4">Podaj aktualne dane konta aby potwierdzić zmianę adresu e-mail.</p>
                <div class="input-group mb-2">
                  <div class="input-group-prepend"><span class="input-group-text">E-mail:</span></div>
                  <input type="email" id="changeMailOldMail" class="form-control">
                  <div class="invalid-feedback">Proszę podać poprawny adres e-mail.</div>
                </div>
                <div class="input-group">
                  <div class="input-group-prepend"><span class="input-group-text">Hasło:</span></div>
                  <input type="password" class="form-control" id="changeMailPass">
                </div>
              </form>
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-outline-danger myModal" data-dismiss="modal" onclick="changeUserMail(event,document.getElementById('changeMailNewMail'), document.getElementById('changeMailOldMail'), document.getElementById('changeMailPass'))">Zatwierdź</button>
                <button type="button" class="btn btn-outline-secondary myModal" data-dismiss="modal" onclick="changeModalClear(document.getElementById('changeMailNewMail'), document.getElementById('changeMailOldMail'), document.getElementById('changeMailPass'))">Anuluj</button>
            </div>
        </div>
    </div>
  </div>

  <div class="modal fade" id="modalChangePass">
    <div class="modal-dialog">
        <div class="modal-content myModal">
            <div class="modal-header">
                <h6 class="modal-title">Zmieniasz swoje hasło</h6>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body"> 
              <form class="needs-validation" novalidate>
                <div class="input-group mb-2">
                  <div class="input-group-prepend"><span class="input-group-text">Nowe hasło:</span></div>
                  <input type="password" id="changePassNewPass" class="form-control border-warning">
                  <div class="invalid-feedback">Proszę podać hasło. Minimum 6 znaków</div>
                </div>
                <div class="input-group">
                  <div class="input-group-prepend"><span class="input-group-text">Powtórz hasło:</span></div>
                  <input type="password" id="changePassNewPass2" class="form-control border-warning">
                  <div class="invalid-feedback">Proszę podać hasło. Hasła musza być zgodne.</div>
                </div>
                
                <p class="font-weight-bolder mt-4">Podaj aktualne dane konta aby potwierdzić zmianę hasła.</p>
                <div class="input-group mb-2">
                  <div class="input-group-prepend"><span class="input-group-text">E-mail:</span></div>
                  <input type="email" id="changePassMail" class="form-control">
                  <div class="invalid-feedback">Proszę podać poprawny adres e-mail.</div>
                </div>
                <div class="input-group">
                  <div class="input-group-prepend"><span class="input-group-text">Hasło:</span></div>
                  <input type="password" class="form-control" id="changePassOldPass">
                </div>
              </form>
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-outline-danger myModal" data-dismiss="modal" onclick="changeUserPass(event,document.getElementById('changePassNewPass'),document.getElementById('changePassNewPass2'), document.getElementById('changePassMail'), document.getElementById('changePassOldPass'))">Zatwierdź</button>
                <button type="button" class="btn btn-outline-secondary myModal" data-dismiss="modal" onclick="changeModalClear(document.getElementById('changePassNewPass'), document.getElementById('changePassMail'), document.getElementById('changePassOldPass'),document.getElementById('changePassNewPass2'))">Anuluj</button>
            </div>
        </div>
    </div>
  </div>

  <div class="modal fade" id="modalDelUser">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title">Usuwanie konta</h6>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <p class="font-weight-bolder text-danger">Czy jesteś pewien i chcesz usunąć swoje konto?</p>
              <form class="needs-validation" novalidate>                
                <p class="font-weight-bolder mt-4">Podaj aktualne dane konta aby potwierdzić zmianę hasła.</p>
                <div class="input-group mb-2">
                  <div class="input-group-prepend"><span class="input-group-text">E-mail:</span></div>
                  <input type="email" id="delUserMail" class="form-control">
                  <div class="invalid-feedback">Proszę podać poprawny adres e-mail.</div>
                </div>
                <div class="input-group">
                  <div class="input-group-prepend"><span class="input-group-text">Hasło:</span></div>
                  <input type="password" class="form-control" id="delUserPass">
                </div>
              </form>
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-outline-danger myModal" data-dismiss="modal" onclick="deleteUser(event,document.getElementById('delUserMail'),document.getElementById('delUserPass'))">Zatwierdź</button>
                <button type="button" class="btn btn-outline-secondary myModal" data-dismiss="modal" onclick="changeModalClear(document.getElementById('delUserMail'),document.getElementById('delUserPass'))">Anuluj</button>
            </div>
        </div>
    </div>
  </div>

  <!-- okno modalne do obsługi karty artykułu -->
  <div class="modal fade" id="modalDelArticle">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
              <p>Czy chcesz usunąć artykuł?</p>
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-outline-danger myModal" data-dismiss="modal" id="delArtYes">Tak</button>
                <button type="button" class="btn btn-outline-secondary myModal" data-dismiss="modal">Nie</button>
            </div>
        </div>
    </div>
  </div>

  <!-- footer -->
  <footer class="container-fluid bg-secondary py-3 myFooter">
    <div class="row">
        <div class="col-6 text-center">
          <p class="text-light m-0">&copy 2020 CiekawiHistorii.pl - Made by Jakub Kruszyński & Paweł Jarosiewicz</p>
        </div>
        <div class="col-6 text-center">
            <a href="https://www.facebook.com/" target="_blank"><i class="fab fa-facebook fa-2x text-primary mx-3"></i></a>
            <a href="https://www.twitter.com" target="_blank"><i class="fab fa-twitter fa-2x text-info mx-3"></i></a>
            <a href="https://www.youtube.com/" target="_blank"><i class="fab fa-youtube fa-2x text-danger mx-3"></i></a>
        </div>
    </div>
</footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/7f7d0c035c.js" crossorigin="anonymous"></script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-auth.js"></script>
    <script src="/scripts/init-firebase.js"></script>

    <!-- własne skrypty -->
    <script defer src="/scripts/main_script.js" type="text/javascript"></script>
    <script src="script/user_script.js"></script>
    <script src="script/userLogin_script.js"></script>
  </body>
</html>